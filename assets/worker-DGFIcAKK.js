(function(){"use strict";class l{constructor(s,n,t=500){this.width=s,this.height=n,this.chunkSize=t,this.canvas=new OffscreenCanvas(s,n),this.ctx=this.canvas.getContext("2d")}drawChunk(s,n,t){const{ctx:e}=this;e.fillStyle="#ffffee",e.fillRect(s,n,t,t),e.strokeStyle="red",e.lineWidth=1,e.strokeRect(s,n,t,t)}drawTitle(s,n,t,e){const{ctx:o}=this;o.fillStyle="#000",o.font="bold 20px Arial",o.textAlign="center",o.textBaseline="middle",o.fillText(`Title (${e})`,s+t/2,n+t/2)}drawDashedLines(s,n,t){const{ctx:e}=this,o=[1/3,2/3];e.setLineDash([5,5]),e.beginPath();for(const a of o)e.moveTo(s,n+a*t),e.lineTo(s+t,n+a*t),e.moveTo(s+a*t,n),e.lineTo(s+a*t,n+t);e.stroke()}generate(){return new Promise((s,n)=>{try{const{ctx:t,canvas:e,width:o,height:a,chunkSize:r}=this;t.fillStyle="#ffffee",t.fillRect(0,0,o,a);let f=1;for(let c=0;c<a;c+=r)for(let i=0;i<o;i+=r)t.save(),this.drawChunk(i,c,r),this.drawTitle(i,c,r,f++),this.drawDashedLines(i,c,r),t.restore();e.convertToBlob({type:"image/png"}).then(s).catch(n)}catch(t){n(t)}})}}self.onmessage=h=>{const{width:s,height:n,chunkSize:t}=h.data;new l(s,n,t).generate().then(o=>self.postMessage(o)).catch(o=>self.postMessage({error:o.message}))}})();
